---
// Lib imports
import { Image } from "@astrojs/image/components"

// Component imports
import Link from "./Link.astro";

// Utils import
import { slugify, formatDate } from "../js/utils"

const { frontmatter, url, tagType="h2" } = Astro.props;

const Tag = tagType;

const { title, author, date, image, category, description } = frontmatter;

---

<article class="card">
        <small>
            <a href={`/category/${slugify(category)}/`} class="badge">{category}</a>
        </small>

        <a href={url} aria-hidden="true" tabindex=-1>
            <Image 
            src={image.src} 
            alt={image.alt} 
            width={1000}
            height={250}
            format="webp"
            fit="cover"
            quality={80}
            aspectRatio="4:1"
            />
        </a>
        <div class="container">
            <div>
                <Tag class="h3">
                    <a href={url}>{title}</a>
                </Tag>
                <small>by <a href={`/author/${slugify(author)}/`}>{author}</a> | {formatDate(date)}</small>
            </div>
            
            <p>{description}</p>
            <br>
            <Link 
                href={url}
                text="Read Post"
                style="secondary"
            />
        </div>
</article>  